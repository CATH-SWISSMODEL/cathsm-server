{"version":3,"sources":["components/AppBar.js","components/QuerySequence.js","components/ScanMatchFigure.js","components/FunfamMatchList.js","components/ModelStructure.js","components/RemoteDataProvider.js","components/AuthTokenProvider.js","components/SubmitCheckResultProvider.js","models/SearchHsp.js","models/SearchHit.js","models/SearchResult.js","models/SearchScan.js","components/WorkFlow.js","App.js","serviceWorker.js","index.js"],"names":["withStyles","root","flexGrow","grow","menuButton","marginLeft","marginRight","props","classes","react_default","a","createElement","className","AppBar_default","position","Toolbar_default","IconButton_default","color","aria-label","Menu_default","Typography_default","variant","Button_default","QuerySequence","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","error","errorMessage","queryFasta","_handleExampleSequenceClick","bind","assertThisInitialized","_handleTextFieldChange","e","seq","trim","console","log","setSequenceFromFasta","msg","setState","target","value","lines","split","header","shift","startsWith","setError","id_re","id_match","match","concat","id","forEach","line","line_num","onChange","queryId","querySequence","helperText","Grid_default","container","spacing","item","xs","TextField_default","InputProps","input","querySequenceInput","label","placeholder","multiline","autoFocus","required","fullWidth","margin","Card_default","card","CardContent_default","CardActions_default","size","onClick","React","Component","theme","display","flexWrap","helpTitle","fontSize","unit","fontFamily","lineHeight","ScanMatchFigure","_this$props","width","residueLength","segments","resPerPixel","style","map","n","start","spanStyle","end","left","key","defaultProps","height","background-color","hsp","desc","b","orderBy","rows","numeric","FunfamMatchTableHead","createSortHandler","property","event","onRequestSort","_this2","order","TableHead_default","TableRow_default","row","TableCell_default","padding","disablePadding","sortDirection","Tooltip_default","title","placement","enterDelay","TableSortLabel_default","active","direction","FunfamMatchTableToolbar","numSelected","classNames","defineProperty","highlight","spacer","actions","Delete_default","FilterList_default","paddingRight","palette","type","secondary","main","backgroundColor","lighten","light","text","primary","dark","flex","FunfamMatchList","selected","page","rowsPerPage","handleRequestSort","_this3","handleClick","selectedIndex","indexOf","newSelected","slice","length","handleChangePage","handleChangeRowsPerPage","isSelected","_this$props2","scanResult","_this4","_this$state","radio","hits","data","hit","matchId","funfam","description","matchDescription","members","funfamMembers","uniq_ec_terms","matchEcCount","uniq_go_terms","matchGoCount","evalue","significance","hsps","idx","queryStart","queryEnd","Paper_default","FunfamMatchList_FunfamMatchTableToolbar","tableWrapper","Table_default","table","aria-labelledby","FunfamMatchList_FunfamMatchTableHead","rowCount","TableBody_default","array","cmp","stabilizedThis","el","index","sort","stableSort","getSorting","hover","role","aria-checked","tabIndex","component","scope","Badge_default","badgeContent","ec","Chip_default","components_ScanMatchFigure","TablePagination_default","rowsPerPageOptions","count","backIconButtonProps","nextIconButtonProps","onChangePage","onChangeRowsPerPage","marginTop","minWidth","overflowX","ModelStructure","loaded","RemoteDataProvider","interval","timer","fetchData","setInterval","clearInterval","endpoint","authToken","method","opts","headers","Accept","Content-Type","JSON","stringify","fetch","then","response","Promise","all","ok","json","_ref","_ref2","slicedToArray","responseOk","body","Error","onComplete","catch","onError","AuthTokenProvider","getAuthTokenAsync","username","password","token","SubmitCheckResultProvider","message","taskId","completed","checkAttempts","handleError","handleAuthToken","handleSubmitComplete","handleCheckComplete","handleResultComplete","endpointName","apiBase","endpointPart","replace","getEndpoint","components_AuthTokenProvider","submitResponse","taskIdFromSubmit","onSubmitResponse","submitData","components_RemoteDataProvider","checkResponse","onCheckResponse","isCompleteFromCheck","maxAttempts","checkMaxAttempts","checkInterval","resultResponse","onResultResponse","content","progress","LinearProgress_default","renderError","colorPrimary","red","renderResult","renderCheck","renderSubmit","renderAuth","index_es","SearchHsp","_React$Component","matchStart","matchEnd","inherits","createClass","SearchHit","matchHasStructure","repSourceId","matchLength","matchSuperfamilyId","matchFunfamMembers","hspData","SearchResult","queryLength","hitData","SearchScan","results","resultData","assertPyObject","objNameExpected","objName","parseCathScanResponseData","substr","query","fasta","join","parseFasta","scanData","funfam_scan","scanArgs","featureCols","result","query_id","query_length","match_name","match_length","match_description","match_cath_id","undefined","ec_term_count","go_term_count","funfam_members","rep_source_id","query_start","query_end","hit_start","hit_end","STEPS_CONFIG","dataClass","resultClass","providerClass","providerProps","authTokenEndpoint","submitEndpoint","checkEndpoint","resultEndpoint","providerHandles","WorkFlow","handleNext","activeStep","handleBack","handleReset","templateError","templateScanResult","handleChangeSequence","handleTemplateError","handleTemplateSubmit","handleTemplateCheck","handleTemplateResult","querySeq","components_QuerySequence","stepid","find","rawdata","scan","parseTemplateResultData","results_json","parse","dataProps","getStepConfigById","templateSubmitData","query_sequence","components_FunfamMatchList","components_SubmitCheckResultProvider","assign","components_ModelStructure","steps","renderQuerySequence","renderSelectTemplate","renderModelStructure","Stepper_default","orientation","step","stepContent","nextId","Step_default","StepLabel_default","StepContent_default","actionsContainer","disabled","button","square","elevation","resetContainer","marginBottom","App","CssBaseline_default","components_AppBar","components_WorkFlow","Boolean","window","location","hostname","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7fc64229.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nconst styles = {\n  root: {\n    flexGrow: 1,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n};\n\nfunction MyAppBar(props) {\n  const { classes } = props;\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\">\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\n            CATH-SWISSMODEL\n          </Typography>\n          <Button color=\"inherit\">Login</Button>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}\n\nMyAppBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(MyAppBar);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = theme => ({\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  helpTitle: {\n    fontSize: 14,\n  },\n  querySequence: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n  },\n  querySequenceInput: {\n    fontFamily: \"Consolas, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace\",\n    fontSize: 12,\n    lineHeight: 1.2,\n  },\n});\n  \nclass QuerySequence extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n        error: false,\n        errorMessage: null,\n        queryFasta: \"\",\n    };\n    \n    // This binding is necessary to make `this` work in the callback\n    this._handleExampleSequenceClick = this._handleExampleSequenceClick.bind(this);\n    this._handleTextFieldChange = this._handleTextFieldChange.bind(this);\n  }\n\n  _handleExampleSequenceClick(e) {\n    const seq = `\n>tr|A0A0Q0Y989|A0A0Q0Y989_9BACI\nMNDFHRDTWAEVDLDAIYDNVANLRRLLPDDTHIMAVVKANAYGHGDVQVARTALEAGAS\nRLAVAFLDEALALREKGIEAPILVLGASRPADAALAAQQRIALTVFRSDWLEEASALYSG\nPFPIHFHLKMDTGMGRLGVKDEEETKRIVALIERHPHFVLEGVYTHFATADEVNTDYFSY\nQYTRFLHMLEWLPSRPPLVHCANSAASLRFPDRTFNMVRFGIAMYGLAPSPGIKPLLPYP\nLKEAFSLHSRLVHVKKLQPGEKVSYGATYTAQTEEWIGTIPIGYADGWLRRLQHFHVLVD\nGQKAPIVGRICMDQCMIRLPGPLPVGTKVTLIGRQGDEVISIDDVARHLETINYEVPCTI\nSYRVPRIFFRHKRIMEVRNAIGRGESSA`.trim();\n    console.log(\"setting: sequence \", seq);\n    this.setSequenceFromFasta(seq);\n  }\n\n  setError(msg) {\n    this.setState({\n      error: true,\n      errorMessage: msg,\n    });\n  }\n\n  _handleTextFieldChange(e) {\n    const queryFasta = e.target.value;\n    this.setSequenceFromFasta(queryFasta);\n  }\n\n  setSequenceFromFasta(queryFasta) {\n    this.setState({ queryFasta });\n    queryFasta = queryFasta.trim();\n    if ( queryFasta === \"\" ) {\n      this.setState({ error: false, errorMessage: null, queryId: null, querySequence: null });\n      return;\n    }\n    const lines = queryFasta.split('\\n');\n    const header = lines.shift();\n    if ( ! header.startsWith('>') ) {\n      return this.setError(\"Expected FASTA header to start with '>'\");\n    }\n    const id_re = /^>(\\S+)/;\n    const id_match = header.match(id_re);\n    if ( !id_match ) {\n      return this.setError(`Failed to parse ID from FASTA header '${header}'`);\n    }\n    const id = id_match[1];\n    let seq = '';\n    lines.forEach(function(line, line_num) {\n      if( line.match(id_re) ) {\n        return;\n      }\n      seq += line.trim();\n    });\n    console.log(\"Calling onChange with seq details\", this.props, id, seq);\n    this.props.onChange(id, seq);\n  }\n\n  getFasta() {\n    if ( this.state.queryId && this.state.querySequence ) {\n      return '>' + this.state.queryId + '\\n' + this.state.querySequence + '\\n';\n    }\n    else {\n      return;\n    }\n  }\n\n  renderError() {\n\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const helperText = this.state.errorMessage ? this.state.errorMessage \n      : \"Protein sequence should be in FASTA format\";\n\n    return (\n      <div className={classes.root}>\n        <Grid container spacing={24}>\n          <Grid item xs={8}>\n            <TextField\n              InputProps={{ classes: { input: classes.querySequenceInput } }}\n              className={classes.querySequence}\n              id=\"query-sequence\"\n              label=\"Query Protein Sequence\"\n              placeholder=\"Paste your query protein sequence here\"\n              helperText={helperText}\n              multiline\n              autoFocus\n              value={this.state.queryFasta}\n              error={this.state.error}\n              required\n              fullWidth\n              margin=\"normal\"\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <Card className={classes.card}>\n              <CardContent>\n                <Typography>\n                  Copy/paste a protein sequence into this form\n                  then click 'Next'.\n                </Typography>\n              </CardContent>\n              <CardActions>\n                  <Button size=\"small\" color=\"primary\" onClick={this._handleExampleSequenceClick}>\n                  Example Sequence\n                  </Button>\n                  <Button size=\"small\" color=\"primary\">\n                  Learn More\n                  </Button>\n              </CardActions>\n            </Card>\n          </Grid>\n        </Grid>\n      </div>);\n  }\n}\n\nQuerySequence.propTypes = {\n  classes: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired,\n  queryId: PropTypes.string,\n  querySequence: PropTypes.string,\n};\n\nexport default withStyles(styles)(QuerySequence);\n\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nconst styles = theme => ({\n  root: {\n    position: \"relative\",\n    display: \"block\",\n    height: 2,\n    \"background-color\": \"#ddd\"\n  },\n  hsp: {\n    height: 7,\n    position: \"absolute\",\n    \"background-color\": \"#c00\"\n  }\n});\n\nclass ScanMatchFigure extends React.Component {\n  render() {\n    const { classes, width, residueLength, segments } = this.props;\n    const resPerPixel = residueLength / width;\n    const style = { width };\n\n    return (\n      <div className={classes.root} style={style}>\n        {segments.map(n => {\n          const { id, start, end } = n;\n          const w = (end - start) * resPerPixel;\n          const l = start * resPerPixel;\n          const spanStyle = { width: w + \"%\", left: l + \"%\" };\n          console.log(\"ScanMatchFigure.style: \", n, spanStyle);\n          return <span key={id} style={spanStyle} />;\n        })}\n      </div>\n    );\n  }\n}\n\nScanMatchFigure.defaultProps = {\n  width: 250\n};\n\nScanMatchFigure.propTypes = {\n  classes: PropTypes.object.isRequired,\n  residueLength: PropTypes.number.isRequired,\n  segments: PropTypes.array.isRequired,\n  width: PropTypes.number.isRequired\n};\n\nexport default withStyles(styles)(ScanMatchFigure);\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Badge from \"@material-ui/core/Badge\";\nimport Chip from \"@material-ui/core/Chip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\nimport { lighten } from \"@material-ui/core/styles/colorManipulator\";\n\nimport ScanMatchFigure from \"./ScanMatchFigure\";\n\nfunction desc(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction stableSort(array, cmp) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = cmp(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map(el => el[0]);\n}\n\nfunction getSorting(order, orderBy) {\n  return order === \"desc\"\n    ? (a, b) => desc(a, b, orderBy)\n    : (a, b) => -desc(a, b, orderBy);\n}\n\nconst rows = [\n  { id: \"funfam\", numeric: false, label: \"Match\" },\n  { id: \"description\", numeric: false, label: \"FunFam Description\" },\n  { id: \"members\", numeric: true, label: \"Domains\" },\n  { id: \"features\", numeric: false, label: \"Features\" },\n  { id: \"query_region\", numeric: false, label: \"Location of matches\" },\n  { id: \"evalue\", numeric: true, label: \"E-value\" }\n];\n\n// FunfamMatchTableHead\n\nclass FunfamMatchTableHead extends React.Component {\n  createSortHandler = property => event => {\n    this.props.onRequestSort(event, property);\n  };\n\n  render() {\n    const { order, orderBy } = this.props;\n\n    return (\n      <TableHead>\n        <TableRow>\n          {rows.map(row => {\n            return (\n              <TableCell\n                key={row.id}\n                numeric={row.numeric}\n                padding={row.disablePadding ? \"none\" : \"default\"}\n                sortDirection={orderBy === row.id ? order : false}\n              >\n                <Tooltip\n                  title=\"Sort\"\n                  placement={row.numeric ? \"bottom-end\" : \"bottom-start\"}\n                  enterDelay={300}\n                >\n                  <TableSortLabel\n                    active={orderBy === row.id}\n                    direction={order}\n                    onClick={this.createSortHandler(row.id)}\n                  >\n                    {row.label}\n                  </TableSortLabel>\n                </Tooltip>\n              </TableCell>\n            );\n          }, this)}\n        </TableRow>\n      </TableHead>\n    );\n  }\n}\n\nFunfamMatchTableHead.propTypes = {\n  onRequestSort: PropTypes.func.isRequired,\n  order: PropTypes.string.isRequired,\n  orderBy: PropTypes.string.isRequired,\n  rowCount: PropTypes.number.isRequired\n};\n\n// FunfamMatchTableToolbar\n\nconst toolbarStyles = theme => ({\n  root: {\n    paddingRight: theme.spacing.unit\n  },\n  highlight:\n    theme.palette.type === \"light\"\n      ? {\n          color: theme.palette.secondary.main,\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85)\n        }\n      : {\n          color: theme.palette.text.primary,\n          backgroundColor: theme.palette.secondary.dark\n        },\n  spacer: {\n    flex: \"1 1 100%\"\n  },\n  actions: {\n    color: theme.palette.text.secondary\n  },\n  title: {\n    flex: \"0 0 auto\"\n  }\n});\n\nlet FunfamMatchTableToolbar = props => {\n  const { numSelected, classes } = props;\n\n  return (\n    <Toolbar\n      className={classNames(classes.root, {\n        [classes.highlight]: numSelected > 0\n      })}\n    >\n      <div className={classes.title}>\n        {numSelected > 0 ? (\n          <Typography color=\"inherit\" variant=\"subtitle1\">\n            {numSelected} selected\n          </Typography>\n        ) : (\n          <Typography variant=\"h6\" id=\"tableTitle\">\n            Domain Matches\n          </Typography>\n        )}\n      </div>\n      <div className={classes.spacer} />\n      <div className={classes.actions}>\n        {numSelected > 0 ? (\n          <Tooltip title=\"Delete\">\n            <IconButton aria-label=\"Delete\">\n              <DeleteIcon />\n            </IconButton>\n          </Tooltip>\n        ) : (\n          <Tooltip title=\"Filter list\">\n            <IconButton aria-label=\"Filter list\">\n              <FilterListIcon />\n            </IconButton>\n          </Tooltip>\n        )}\n      </div>\n    </Toolbar>\n  );\n};\n\nFunfamMatchTableToolbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  numSelected: PropTypes.number.isRequired\n};\n\nFunfamMatchTableToolbar = withStyles(toolbarStyles)(FunfamMatchTableToolbar);\n\n// FunfamMatchList\n\nconst styles = theme => ({\n  root: {\n    width: \"100%\",\n    marginTop: theme.spacing.unit * 1\n  },\n  table: {\n    minWidth: 1020\n  },\n  tableWrapper: {\n    overflowX: \"auto\"\n  }\n});\n\nclass FunfamMatchList extends React.Component {\n  state = {\n    order: \"asc\",\n    orderBy: \"evalue\",\n    selected: [],\n    page: 0,\n    rowsPerPage: 25\n  };\n\n  componentDidMount() {\n    const { scanResult, queryId, querySequence } = this.props;\n    this.setState({ scanResult, queryId, querySequence });\n  }\n\n  handleRequestSort = (event, property) => {\n    const orderBy = property;\n    let order = \"desc\";\n\n    if (this.state.orderBy === property && this.state.order === \"desc\") {\n      order = \"asc\";\n    }\n\n    this.setState({ order, orderBy });\n  };\n\n  handleClick = (event, id) => {\n    const { selected } = this.state;\n    const selectedIndex = selected.indexOf(id);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, id);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(\n        selected.slice(0, selectedIndex),\n        selected.slice(selectedIndex + 1)\n      );\n    }\n\n    this.setState({ selected: newSelected });\n  };\n\n  handleChangePage = (event, page) => {\n    this.setState({ page });\n  };\n\n  handleChangeRowsPerPage = event => {\n    this.setState({ rowsPerPage: event.target.value });\n  };\n\n  isSelected = id => this.state.selected.indexOf(id) !== -1;\n\n  render() {\n    const { classes } = this.props;\n    const {\n      scanResult,\n      order,\n      orderBy,\n      selected,\n      rowsPerPage,\n      page,\n      radio,\n      querySequence\n    } = this.state;\n    const hits = scanResult ? scanResult.hits : [];\n\n    const data = hits.map(hit => {\n      return {\n        id: hit.matchId,\n        funfam: hit.matchId,\n        description: hit.matchDescription,\n        members: hit.funfamMembers,\n        uniq_ec_terms: hit.matchEcCount,\n        uniq_go_terms: hit.matchGoCount,\n        evalue: hit.significance,\n        segments: hit.hsps.map((hsp, idx) => {\n          return { id: idx, start: hsp.queryStart, end: hsp.queryEnd };\n        })\n      };\n    });\n\n    return (\n      <Paper className={classes.root}>\n        <FunfamMatchTableToolbar numSelected={selected.length} />\n        <div className={classes.tableWrapper}>\n          <Table className={classes.table} aria-labelledby=\"tableTitle\">\n            <FunfamMatchTableHead\n              numSelected={selected.length}\n              order={order}\n              orderBy={orderBy}\n              onRequestSort={this.handleRequestSort}\n              rowCount={hits.length}\n            />\n            <TableBody>\n              {stableSort(data, getSorting(order, orderBy))\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map(n => {\n                  const isSelected = this.isSelected(n.id);\n                  return (\n                    <TableRow\n                      hover\n                      onClick={event => this.handleClick(event, n.id)}\n                      role={radio ? \"radio\" : \"checkbox\"}\n                      aria-checked={isSelected}\n                      tabIndex={-1}\n                      key={n.id}\n                      selected={isSelected}\n                    >\n                      <TableCell component=\"th\" scope=\"row\">\n                        {n.funfam}\n                      </TableCell>\n                      <TableCell>{n.description}</TableCell>\n                      <TableCell>{n.members}</TableCell>\n                      <TableCell>\n                        {n.uniq_ec_terms && (\n                          <Badge\n                            badgeContent={n.uniq_ec_terms}\n                            color=\"primary\"\n                            className={classes.ec}\n                          >\n                            <Chip label=\"EC\" className={classes.ec} />\n                          </Badge>\n                        )}\n                      </TableCell>\n                      <TableCell>\n                        <ScanMatchFigure\n                          width={250}\n                          residueLength={querySequence.length}\n                          segments={n.segments}\n                        />\n                      </TableCell>\n                      <TableCell numeric>{n.evalue}</TableCell>\n                    </TableRow>\n                  );\n                })}\n            </TableBody>\n          </Table>\n        </div>\n        <TablePagination\n          rowsPerPageOptions={[10, 25, 50]}\n          component=\"div\"\n          count={data.length}\n          rowsPerPage={rowsPerPage}\n          page={page}\n          backIconButtonProps={{\n            \"aria-label\": \"Previous Page\"\n          }}\n          nextIconButtonProps={{\n            \"aria-label\": \"Next Page\"\n          }}\n          onChangePage={this.handleChangePage}\n          onChangeRowsPerPage={this.handleChangeRowsPerPage}\n        />\n      </Paper>\n    );\n  }\n}\n\nFunfamMatchList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  scanResult: PropTypes.object,\n  queryId: PropTypes.string.isRequired,\n  querySequence: PropTypes.string.isRequired\n};\n\nexport default withStyles(styles)(FunfamMatchList);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n    root: {\n      flexGrow: 1,\n      padding: theme.spacing.unit * 2,\n    },\n});\n  \nclass ModelStructure extends Component {\n\n    static propTypes = {\n        apiBase: PropTypes.string.isRequired,\n        submitEndpoint: PropTypes.string.isRequired,\n        checkEndpoint: PropTypes.string.isRequired,\n        resultsEndpoint: PropTypes.string.isRequired,\n        checkTimeout: PropTypes.number.isRequired,\n        checkMaxAttempts: PropTypes.number.isRequired,\n        queryId: PropTypes.string.isRequired,\n        querySequence: PropTypes.string.isRequired,\n      };\n    \n    render() {\n        const { data, loaded, placeholder } = this.state;\n        return loaded ? data : <p>{placeholder}</p>;\n    }\n}\n\nModelStructure.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(ModelStructure);\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass RemoteDataProvider extends Component {\n  static defaultProps = {\n    method: \"GET\"\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    console.log(`RemoteDataProvider().componentDidMount`);\n    const interval = this.props.interval;\n    this.timer = null;\n    this.fetchData();\n    if (interval) {\n      console.log(`RemoteDataProvider().componentDidMount.setInterval`);\n      this.timer = setInterval(() => this.fetchData(), interval);\n    }\n  }\n\n  componentWillUnmount() {\n    console.log(\"RemoteDataProvider().componentWillUnmount\");\n    clearInterval(this.timer);\n  }\n\n  fetchData() {\n    const endpoint = this.props.endpoint;\n    const authToken = this.props.authToken;\n    const data = this.props.data;\n    const method = this.props.method;\n\n    let opts = {\n      method,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    if (authToken) {\n      opts.headers[\"Authorization\"] = `token ${authToken}`;\n    }\n    if (data) {\n      opts[\"body\"] = JSON.stringify(data);\n    }\n\n    console.log(\n      `Submitting data to ${endpoint}: method=${method}, auth=${authToken}, data=${data}`,\n      opts\n    );\n\n    return fetch(endpoint, opts)\n      .then(response => Promise.all([response.ok, response.json()]))\n      .then(([responseOk, body]) => {\n        if (responseOk) {\n          this.props.onComplete(body);\n        } else {\n          const msg = body[\"non_field_errors\"]\n            ? body[\"non_field_errors\"]\n            : \"Unexpected error\";\n          throw Error(msg);\n        }\n      })\n      .catch(error => {\n        const msg = `RemoteDataProvider failed to get data: ${error}`;\n        console.error(msg);\n        this.props.onError(msg);\n      });\n  }\n\n  render() {\n    return null;\n  }\n}\n\nRemoteDataProvider.propTypes = {\n  endpoint: PropTypes.string.isRequired,\n  method: PropTypes.string.isRequired,\n  authToken: PropTypes.string,\n  data: PropTypes.object,\n  interval: PropTypes.number,\n  onError: PropTypes.func.isRequired,\n  onComplete: PropTypes.func.isRequired\n};\n\nexport default RemoteDataProvider;\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1\n  }\n});\n\nclass AuthTokenProvider extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    this.getAuthTokenAsync();\n  }\n\n  getAuthTokenAsync() {\n    const data = {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: this.props.username,\n        password: this.props.password\n      })\n    };\n\n    return fetch(this.props.endpoint, data)\n      .then(response => Promise.all([response.ok, response.json()]))\n      .then(([responseOk, body]) => {\n        if (responseOk) {\n          const token = body[\"token\"];\n          if (typeof token !== \"string\") {\n            throw Error(\"failed to get token from response json\", body);\n          }\n          this.setState(() => ({ authToken: token }));\n          this.props.onChange(token);\n        } else {\n          const msg = body[\"non_field_errors\"]\n            ? body[\"non_field_errors\"]\n            : \"Unexpected error\";\n          throw Error(msg);\n        }\n      })\n      .catch(error => {\n        const msg = `Failed to get auth token: ${error}`;\n        console.error(msg);\n        this.props.onError(msg);\n      });\n  }\n\n  render() {\n    return null;\n  }\n}\n\nAuthTokenProvider.propTypes = {\n  classes: PropTypes.object.isRequired,\n  endpoint: PropTypes.string.isRequired,\n  username: PropTypes.string.isRequired,\n  password: PropTypes.string.isRequired,\n\n  onError: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(AuthTokenProvider);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport red from \"@material-ui/core/colors/red\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport RemoteDataProvider from \"./RemoteDataProvider\";\nimport AuthTokenProvider from \"./AuthTokenProvider\";\nimport { Typography } from \"@material-ui/core\";\n\nconst styles = theme => ({\n  root: {\n    width: \"100%\"\n  }\n});\n\nclass SubmitCheckResultProvider extends Component {\n  static defaultProps = {\n    checkInterval: 2000,\n    checkMaxAttempts: 50\n  };\n\n  // error: true                                       => error\n  // authToken: false                                  => auth\n  // authToken: true, taskId: false                    => submit\n  // authToken: true, taskId: true, completed: false   => check\n  // authToken: true, taskId: true, completed: true    => results\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      message: \"Waiting for message to be set\",\n      error: false,\n      authToken: null,\n      taskId: false,\n      completed: false\n    };\n    this.checkAttempts = 0;\n    this.handleError = this.handleError.bind(this);\n    this.handleAuthToken = this.handleAuthToken.bind(this);\n    this.handleSubmitComplete = this.handleSubmitComplete.bind(this);\n    this.handleCheckComplete = this.handleCheckComplete.bind(this);\n    this.handleResultComplete = this.handleResultComplete.bind(this);\n  }\n\n  getEndpoint(type, id) {\n    const endpointName = type + \"Endpoint\";\n    const apiBase = this.props.apiBase;\n    const endpointPart = this.props[endpointName];\n    if (!endpointPart) {\n      throw Error(`failed to get endpoint for type ${type}`, this.props);\n    }\n    let endpoint = apiBase ? apiBase + endpointPart : endpointPart;\n    if (id) {\n      endpoint = endpoint.replace(\"<id>\", id);\n    }\n    return endpoint;\n  }\n\n  handleError(msg) {\n    this.setState({ error: true, message: msg });\n    if (this.props.onError) {\n      this.props.onError(msg);\n    }\n  }\n\n  handleAuthToken(token) {\n    console.log(`handleAuthToken: ${token}`);\n    this.setState({ authToken: token, message: \"Received Auth Token\" });\n  }\n\n  renderAuth() {\n    const endpoint = this.getEndpoint(\"authToken\");\n    console.log(\"Auth.endpoint\", endpoint);\n    return (\n      <AuthTokenProvider\n        endpoint={endpoint}\n        username={this.props.username}\n        password={this.props.password}\n        onError={this.handleError}\n        onChange={this.handleAuthToken}\n      />\n    );\n  }\n\n  handleSubmitComplete(submitResponse) {\n    console.log(\"handleSubmitComplete: \", submitResponse);\n    const taskId = this.props.taskIdFromSubmit(submitResponse);\n    if (!taskId) {\n      this.handleError(`Failed to get Task ID from response`);\n      return;\n    } else {\n      this.setState({ taskId, message: \"Submitted\" });\n    }\n    if (this.props.onSubmitResponse) {\n      this.props.onSubmitResponse(submitResponse);\n    }\n  }\n\n  renderSubmit() {\n    const endpoint = this.getEndpoint(\"submit\");\n    const authToken = this.state.authToken;\n    const submitData = this.props.submitData;\n    return (\n      <RemoteDataProvider\n        key=\"remote-data-provider-submit\"\n        endpoint={endpoint}\n        method=\"POST\"\n        authToken={authToken}\n        data={submitData}\n        onError={this.handleError}\n        onComplete={this.handleSubmitComplete}\n      />\n    );\n  }\n\n  handleCheckComplete(checkResponse) {\n    console.log(`handleCheckComplete: `, checkResponse, this.checkAttempts);\n    if (this.props.onCheckResponse) {\n      this.props.onCheckResponse(checkResponse);\n    }\n    const complete = this.props.isCompleteFromCheck(checkResponse);\n    if (complete) {\n      this.setState({ completed: true, message: \"Complete\" });\n      return;\n    }\n    this.setState({ message: \"Checking...\" });\n    const maxAttempts = this.props.checkMaxAttempts;\n    console.log(`handleCheckComplete`, this.checkAttempts, maxAttempts);\n    if (this.checkAttempts++ > maxAttempts) {\n      const msg = `Exceeded maximum number of attempts (${maxAttempts}) when checking for results to finish.`;\n      return this.handleError(msg, checkResponse);\n    }\n  }\n\n  renderCheck() {\n    const authToken = this.state.authToken;\n    const taskId = this.state.taskId;\n    const endpoint = this.getEndpoint(\"check\", taskId);\n    const interval = this.props.checkInterval;\n    return (\n      <RemoteDataProvider\n        key=\"remote-data-provider-check\"\n        authToken={authToken}\n        endpoint={endpoint}\n        interval={interval}\n        onError={this.handleError}\n        onComplete={this.handleCheckComplete}\n      />\n    );\n  }\n\n  handleResultComplete(resultResponse) {\n    console.log(`handleResultComplete: ${resultResponse}`);\n    this.setState({ message: \"Success\" });\n    this.props.onResultResponse(resultResponse);\n  }\n\n  renderResult() {\n    const authToken = this.state.authToken;\n    const taskId = this.state.taskId;\n    const endpoint = this.getEndpoint(\"result\", taskId);\n    return (\n      <RemoteDataProvider\n        key=\"remote-data-provider-result\"\n        authToken={authToken}\n        endpoint={endpoint}\n        onError={this.handleError}\n        onComplete={this.handleResultComplete}\n      />\n    );\n  }\n\n  renderError() {\n    const msg = this.state.message;\n    console.error(\"Error: \", msg, this.state);\n    return `Error: ${msg}`;\n  }\n\n  render() {\n    const { classes } = this.props;\n    const error = this.state.error;\n    const authToken = this.state.authToken;\n    const taskId = this.state.taskId;\n    const completed = this.state.completed;\n    const message = this.state.message;\n\n    let content = \"\";\n    let progress = <LinearProgress variant=\"query\" />;\n    if (error) {\n      content = this.renderError();\n      progress = (\n        <LinearProgress\n          variant=\"determinate\"\n          value={100}\n          classes={{ colorPrimary: red[500] }}\n        />\n      );\n    } else if (!authToken) {\n      content = this.renderAuth();\n    } else if (!taskId) {\n      content = this.renderSubmit();\n    } else if (!completed) {\n      content = this.renderCheck();\n    } else {\n      content = this.renderResult();\n      progress = null;\n    }\n\n    console.log(\n      `render: error=${error} authToken=${authToken} taskId=${taskId} completed=${completed}`,\n      this.state\n    );\n\n    return (\n      <div className={classes.root}>\n        {message && <Typography>{message}</Typography>}\n        {progress}\n        {content}\n      </div>\n    );\n  }\n}\n\nSubmitCheckResultProvider.propTypes = {\n  apiBase: PropTypes.string.isRequired,\n\n  authTokenEndpoint: PropTypes.string.isRequired,\n  submitEndpoint: PropTypes.string.isRequired,\n  checkEndpoint: PropTypes.string.isRequired,\n  resultEndpoint: PropTypes.string.isRequired,\n  submitData: PropTypes.object.isRequired,\n\n  username: PropTypes.string.isRequired,\n  password: PropTypes.string.isRequired,\n\n  checkInterval: PropTypes.number.isRequired,\n  checkMaxAttempts: PropTypes.number.isRequired,\n  taskIdFromSubmit: PropTypes.func.isRequired,\n  isCompleteFromCheck: PropTypes.func.isRequired,\n\n  onError: PropTypes.func.isRequired,\n  onSubmitResponse: PropTypes.func,\n  onCheckResponse: PropTypes.func,\n  onResultResponse: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(SubmitCheckResultProvider);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport class SearchHsp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { queryStart, queryEnd, matchStart, matchEnd } = props;\n    this.queryStart = queryStart;\n    this.queryEnd = queryEnd;\n    this.matchStart = matchStart;\n    this.matchEnd = matchEnd;\n  }\n  render() {\n    return null;\n  }\n}\n\nSearchHsp.propTypes = {\n  queryStart: PropTypes.string.isRequired,\n  queryEnd: PropTypes.string.isRequired,\n  matchStart: PropTypes.string.isRequired,\n  matchEnd: PropTypes.string.isRequired\n};\n\nexport default SearchHsp;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport SearchHsp from \"./SearchHsp\";\n\nexport class SearchHit extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.matchId = props.matchId;\n    this.matchDescription = props.matchDescription;\n    this.matchLength = props.matchLength;\n    this.matchSuperfamilyId = props.matchSuperfamilyId;\n    this.significance = props.significance;\n    this.matchEcCount = props.matchEcCount;\n    this.matchGoCount = props.matchGoCount;\n    this.matchFunfamMembers = props.matchFunfamMembers;\n    this.repSourceId = props.repSourceId;\n\n    this.hsps = props.hsps.map(hspData => new SearchHsp(hspData));\n  }\n\n  matchHasStructure = () => this.repSourceId === \"cath\";\n\n  render() {\n    return null;\n  }\n}\n\nSearchHit.propTypes = {\n  matchId: PropTypes.string.isRequired,\n  matchDescription: PropTypes.string.isRequired,\n  matchLength: PropTypes.string.isRequired,\n  matchSuperfamilyId: PropTypes.string.isRequired,\n  significance: PropTypes.number.isRequired,\n  matchEcCount: PropTypes.string.isRequired,\n  matchGoCount: PropTypes.string.isRequired,\n  matchFunfamMembers: PropTypes.string.isRequired,\n  repSourceId: PropTypes.string.isRequired\n};\n\nexport default SearchHit;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport SearchHit from \"./SearchHit\";\n\nexport class SearchResult extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { queryId, queryLength, hits } = props;\n    this.queryId = queryId;\n    this.queryLength = queryLength;\n    this.hits = hits;\n    if (hits.length) {\n      this.hits = hits.map(hitData => new SearchHit(hitData));\n    }\n  }\n}\n\nSearchResult.defaultProps = {\n  hits: []\n};\n\nSearchResult.propTypes = {\n  queryId: PropTypes.string.isRequired,\n  queryLength: PropTypes.string.isRequired,\n  hits: PropTypes.array.isRequired\n};\n\nexport default SearchResult;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SearchResult from \"./SearchResult\";\n\nclass SearchScan extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { queryId, querySequence, results } = props || {};\n    this.queryId = queryId;\n    this.querySequence = querySequence;\n    this.results = results || [];\n\n    if (results && results.length) {\n      this.results = results.map(resultData => new SearchResult(resultData));\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nSearchScan.propTypes = {\n  queryId: PropTypes.string.isRequired,\n  querySequence: PropTypes.string.isRequired,\n  results: PropTypes.array.isRequired\n};\n\nfunction assertPyObject(data, objNameExpected) {\n  let error = null;\n  if (typeof data !== \"object\") {\n    error = `data is not an object: ${JSON.stringify(data)}`;\n  } else {\n    const objName = data[\"py/object\"];\n    if (typeof objName === \"undefined\") {\n      error = `data does not have 'py/object' field: ${JSON.stringify(data)}`;\n    } else if (objName !== objNameExpected) {\n      error = `wrong py/object (expected ${objNameExpected}, got ${objName})`;\n    }\n  }\n  if (error) {\n    throw Error(`assertPyObject failed: ${error}`);\n  }\n  return true;\n}\n\nfunction parseFasta(fasta) {\n  const lines = fasta.split(\"\\n\");\n  if (!lines[0].startsWith(\">\")) {\n    throw Error(\n      `failed to parse fasta (header line does not start with '>'): ${lines[0]}`\n    );\n  }\n  const id = lines.shift().substr(1);\n  const seq = lines.map(line => line.trim()).join(\"\");\n  return { id, seq };\n}\n\nfunction parseCathScanResponseData(data) {\n  assertPyObject(data, \"cathpy.funfhmmer.ResultResponse\");\n  // console.log(\"response: \", data);\n  console.log(\n    \"data: \",\n    JSON.stringify(data).substr(0, 200),\n    \"---8<---\",\n    JSON.stringify(data).substr(-200)\n  );\n  const query = parseFasta(data[\"query_fasta\"]);\n  const scanData = data.funfam_scan;\n  assertPyObject(scanData, \"cathpy.models.Scan\");\n  const results = scanData.results ? scanData.results : [];\n  const scanArgs = {\n    queryId: query.id,\n    querySequence: query.seq,\n    featureCols: data.featureCols,\n    results: results.map(result => {\n      assertPyObject(result, \"cathpy.models.ScanResult\");\n      // console.log(\"result: \", JSON.stringify(result).substr(0, 200));\n      const hits = result.hits ? result.hits : [];\n      return {\n        queryId: result.query_id,\n        queryLength: result.query_length,\n        hits: hits.map(hit => {\n          // console.log(\"hit: \", hit);\n          assertPyObject(hit, \"cathpy.models.ScanHit\");\n          const hsps = hit.hsps ? hit.hsps : [];\n          const hitData = hit[\"data\"] ? hit[\"data\"] : {};\n          return {\n            matchId: hit.match_name,\n            matchLength: hit.match_length,\n            matchDescription: hit.match_description,\n            matchSuperfamilyId: hit.match_cath_id\n              ? hit.match_cath_id.id\n              : undefined,\n            significance: hit.significance,\n            matchEcCount: hitData.ec_term_count,\n            matchGoCount: hitData.go_term_count,\n            matchFunfamMembers: hitData.funfam_members,\n            repSourceId: hitData.rep_source_id,\n            hsps: hsps.map(hsp => {\n              assertPyObject(hsp, \"cathpy.models.ScanHsp\");\n              // console.log(\"hsp: \", hsp);\n              return {\n                queryStart: hsp.query_start,\n                queryEnd: hsp.query_end,\n                matchStart: hsp.hit_start,\n                matchEnd: hsp.hit_end\n              };\n            })\n          };\n        })\n      };\n    })\n  };\n  // console.log(\"scanArgs: \", scanArgs, SearchScan);\n  const scan = new SearchScan(scanArgs);\n  return scan;\n}\n\nexport { parseCathScanResponseData };\nexport default SearchScan;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport StepContent from \"@material-ui/core/StepContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport QuerySequence from \"./QuerySequence.js\";\nimport FunfamMatchList from \"./FunfamMatchList.js\";\nimport ModelStructure from \"./ModelStructure.js\";\nimport SubmitCheckResultProvider from \"./SubmitCheckResultProvider.js\";\n\nimport { parseCathScanResponseData } from \"../models/SearchScan.js\";\n\nconst styles = theme => ({\n  root: {\n    width: \"100%\"\n  },\n  button: {\n    marginTop: theme.spacing.unit,\n    marginRight: theme.spacing.unit\n  },\n  actionsContainer: {\n    marginBottom: theme.spacing.unit * 2\n  },\n  resetContainer: {\n    padding: theme.spacing.unit * 3\n  }\n});\n\nconst STEPS_CONFIG = [\n  {\n    id: \"query-sequence\",\n    label: \"Query Sequence\",\n    dataClass: \"QuerySequence\"\n  },\n  {\n    id: \"select-template\",\n    label: \"Select Template\",\n    resultClass: \"SelectTemplateTable\",\n    providerClass: \"SubmitCheckResultProvider\",\n    providerProps: {\n      apiBase: \"http://localhost:8000/\",\n      authTokenEndpoint: \"api/api-auth-token/\",\n      submitEndpoint: \"api/select-template/\",\n      checkEndpoint: \"api/select-template/<id>/\",\n      resultEndpoint: \"api/select-template/<id>/results\",\n      taskIdFromSubmit: data => {\n        return data[\"uuid\"];\n      },\n      isCompleteFromCheck: data => {\n        return data[\"status\"] === \"success\";\n      },\n      username: \"apiuser\",\n      password: \"apiuserpassword\"\n    },\n    providerHandles: {\n      onError: \"handleTemplateError\",\n      onSubmitResponse: \"handleTemplateSubmit\",\n      onCheckResponse: \"handleTemplateCheck\",\n      onResultResponse: \"handleTemplateResult\"\n    }\n  },\n  {\n    id: \"model-structure\",\n    label: \"Model Structure\",\n    resultClass: \"ModelStructure\",\n    providerClass: \"SubmitCheckResultProvider\",\n    providerProps: {\n      apiBase: \"http://beta.swissmodel.expasy.org/\",\n      authTokenEndpoint: \"api/api-auth-token/\",\n      submitEndpoint: \"api/alignment/\",\n      checkEndpoint: \"api/alignment/<id>/status\",\n      resultEndpoint: \"api/alignment/<id>/\",\n      taskIdFromSubmit: data => {\n        return data[\"uuid\"];\n      },\n      isCompleteFromCheck: data => {\n        return data[\"status\"] === \"success\";\n      },\n      username: \"ian\",\n      password: \"4cathuse\"\n    },\n    providerHandles: {\n      onError: \"handleModelError\",\n      onSubmitResponse: \"handleModelSubmit\",\n      onCheckResponse: \"handleModelCheck\",\n      onResultResponse: \"handleModelResult\"\n    }\n  }\n];\n\n// error\n// {queryId, querySequence}: false => step1\n// {queryId, querySequence}: true  => step1 complete\n\nclass WorkFlow extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeStep: 0,\n      queryId: null,\n      querySequence: null,\n      taskId: null,\n      templateError: null,\n      templateScanResult: null\n    };\n\n    this.handleChangeSequence = this.handleChangeSequence.bind(this);\n    this.handleTemplateError = this.handleTemplateError.bind(this);\n    this.handleTemplateSubmit = this.handleTemplateSubmit.bind(this);\n    this.handleTemplateCheck = this.handleTemplateCheck.bind(this);\n    this.handleTemplateResult = this.handleTemplateResult.bind(this);\n    // this.handleModelError = this.handleModelError.bind(this);\n    // this.handleModelSubmit = this.handleModelSubmit.bind(this);\n    // this.handleModelCheck = this.handleModelCheck.bind(this);\n    // this.handleModelResult = this.handleModelResult.bind(this);\n  }\n\n  handleChangeSequence(queryId, querySequence) {\n    console.log(\"Setting query sequence\", queryId, querySequence);\n    this.setState({ queryId, querySequence });\n  }\n\n  handleNext = e => {\n    console.log(\"handleNext: \", e, e.target);\n    this.setState(state => ({\n      activeStep: state.activeStep + 1\n    }));\n  };\n\n  handleBack = () => {\n    this.setState(state => ({\n      activeStep: state.activeStep - 1\n    }));\n  };\n\n  handleReset = () => {\n    this.setState({\n      activeStep: 0\n    });\n  };\n\n  renderQuerySequence() {\n    const queryId = this.state.queryId;\n    const querySeq = this.state.querySequence;\n    return (\n      <QuerySequence\n        queryId={queryId}\n        querySequence={querySeq}\n        onChange={this.handleChangeSequence}\n      />\n    );\n  }\n\n  getStepConfigById(stepid) {\n    return STEPS_CONFIG.find(data => data.id === stepid);\n  }\n\n  handleTemplateError(msg) {\n    console.log(\"handleTemplateError\", msg);\n    this.setState({ templateError: true });\n  }\n\n  handleTemplateSubmit(data) {\n    console.log(\"handleTemplateSubmit\", data);\n  }\n\n  handleTemplateCheck(data) {\n    console.log(\"handleTemplateCheck\", data);\n  }\n\n  handleTemplateResult(rawdata) {\n    console.log(\"handleTemplateResult\", rawdata);\n    const scan = this.parseTemplateResultData(rawdata);\n    if (scan.results.length > 1) {\n      throw Error(\n        `Scan has ${scan.results.length} results, expected exactly 1`\n      );\n    }\n    const scanResult = scan.results[0];\n    this.setState({ templateScanResult: scanResult });\n  }\n\n  parseTemplateResultData(rawdata) {\n    console.log(\"parseTemplateResultData\", rawdata);\n    const results_json = rawdata.results_json;\n    const data = JSON.parse(results_json);\n    let scan = null;\n    try {\n      scan = parseCathScanResponseData(data);\n    } catch (e) {\n      console.log(\"failed to parse template results from data\", e, rawdata);\n      this.handleTemplateError(\"failed to parse template results from data\");\n    }\n    console.log(\"parse: \", results_json, data.funfam_scan, scan);\n    return scan;\n  }\n\n  renderSelectTemplate() {\n    const stepConfig = this.getStepConfigById(\"select-template\");\n    const dataProps = stepConfig[\"providerProps\"];\n\n    const { queryId, querySequence, templateScanResult } = this.state;\n    const templateSubmitData = {\n      query_id: queryId,\n      query_sequence: querySequence\n    };\n    let content;\n    if (!templateScanResult) {\n      content = (\n        <SubmitCheckResultProvider\n          {...dataProps}\n          key=\"select-template\"\n          submitData={templateSubmitData}\n          onError={this.handleTemplateError}\n          onSubmitResponse={this.handleTemplateSubmit}\n          onCheckResponse={this.handleTemplateCheck}\n          onResultResponse={this.handleTemplateResult}\n        />\n      );\n    } else {\n      content = (\n        <FunfamMatchList\n          queryId={this.state.queryId}\n          querySequence={this.state.queryId}\n          scanResult={templateScanResult}\n        />\n      );\n    }\n    return <div>{content}</div>;\n  }\n\n  renderModelStructure() {\n    return <ModelStructure />;\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { activeStep } = this.state;\n    const steps = [\n      { label: \"Query Sequence\", content: this.renderQuerySequence() },\n      { label: \"Select Template\", content: this.renderSelectTemplate() },\n      { label: \"Model Structure\", content: this.renderModelStructure() }\n    ];\n    return (\n      <div className={classes.root}>\n        <Stepper activeStep={activeStep} orientation=\"vertical\">\n          {steps.map((step, index) => {\n            const label = step[\"label\"];\n            const stepContent = step[\"content\"];\n            const nextId = \"next\" + step[\"tag\"];\n            return (\n              <Step key={label}>\n                <StepLabel>{label}</StepLabel>\n                <StepContent>\n                  {stepContent}\n                  <div className={classes.actionsContainer}>\n                    <div>\n                      <Button\n                        disabled={activeStep === 0}\n                        onClick={this.handleBack}\n                        className={classes.button}\n                      >\n                        Back\n                      </Button>\n                      <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        key={nextId}\n                        onClick={this.handleNext}\n                        className={classes.button}\n                      >\n                        {activeStep === steps.length - 1 ? \"Finish\" : \"Next\"}\n                      </Button>\n                    </div>\n                  </div>\n                </StepContent>\n              </Step>\n            );\n          })}\n        </Stepper>\n        {activeStep === steps.length && (\n          <Paper square elevation={0} className={classes.resetContainer}>\n            <Typography>All steps completed - you&quot;re finished</Typography>\n            <Button onClick={this.handleReset} className={classes.button}>\n              Reset\n            </Button>\n          </Paper>\n        )}\n      </div>\n    );\n  }\n}\n\nWorkFlow.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(WorkFlow);\n","import React, { Component } from 'react';\nimport './App.css';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from './components/AppBar.js';\nimport WorkFlow from './components/WorkFlow.js';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <CssBaseline />\n        <AppBar />\n        <WorkFlow />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}